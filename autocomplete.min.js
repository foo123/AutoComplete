/*
    https://github.com/foo123/autocomplete
    
    adapted from:
    JavaScript autoComplete v1.0.3
    Copyright (c) 2014 Simon Steinberger / Pixabay
    GitHub: https://github.com/Pixabay/JavaScript-autoComplete
    License: http://www.opensource.org/licenses/mit-license.php
*/
!function(e,t,n){"use strict";"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(function(){return n()}):e[t]=n()}(this,"autoComplete",function(){"use strict";function t(e,t){for(var n in t)t[v](n)&&(e[n]=t[n]);return e}function n(e,t){for(var n in t)t[v](n)&&("function"==typeof t[n].get&&e.__defineGetter__(n,t[n].get),"function"==typeof t[n].set&&e.__defineSetter__(n,t[n].set));return e}function o(e){return e.replace(w,"\\$&")}function i(e){var t,n,o="",i=e.length;for(t=0;i>t;t++)n=e.charAt(t),o+="&"===n?"&amp;":"<"===n?"&lt;":">"===n?"&gt;":n;return o}function u(e,t){return(t||document).querySelector(e)}function l(e,t,n){var o=document.createElement(e);return t&&(o.className=t),n&&(o.innerHTML=n),o}function s(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function c(e,t){s(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function r(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function a(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function f(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function m(e,t,n,o){a(o||document,t,function(t){for(var o=!1,i=t.target||t.srcElement;i&&!(o=s(i,e));)i=i.parentElement;o&&n.call(i,t)})}function g(e,t,n,o){var i=e.getBoundingClientRect();if(t.style.left=i.left+(window.pageXOffset||document.documentElement.scrollLeft)+"px",t.style.top=i.bottom+(window.pageYOffset||document.documentElement.scrollTop)+1+"px",t.style.width=i.right-i.left+"px",!n&&(c(t,"visible"),t._maxHeight||(t._maxHeight=parseInt(x(t).maxHeight,10)),t._suggestionHeight||(t._suggestionHeight=t._empty?u(".autocomplete-no-suggestions",t).offsetHeight:u(".autocomplete-suggestion",t).offsetHeight),t._suggestionHeight))if(o){var l=t.scrollTop,s=o.getBoundingClientRect().top-t.getBoundingClientRect().top;s+t._suggestionHeight-t._maxHeight>0?t.scrollTop=s+t._suggestionHeight+l-t._maxHeight:0>s&&(t.scrollTop=s+l)}else t.scrollTop=0}function d(e){if(C.length)for(var t=0,n=C.length;n>t;t++)g(C[t].element,C[t].sc,e)}function p(p,v){var w=this;v=t({source:0,minChars:3,delay:150,key:null,value:null,cache:5e3,menuClass:"",noItems:"No Matches for <strong>{{term}}</strong>",renderItem:function(e,t,n,o,i,u){return o.replace(u,"<mark>$1</mark>")},onSelect:function(){}},v||{}),n(w,{suggestions:{get:function(){return L[A._term]||[]},set:function(e){D(e||[])}},key:{get:function(){return H},set:function(e){H=null!=e?e:null}},value:{get:function(){return S},set:function(e){S=null!=e?e:null}},cache:{get:function(){return E},set:function(e){E=parseInt(e,10)||0,0>E&&(E=0)}},delay:{get:function(){return T},set:function(e){T=parseInt(e,10)||0,0>T&&(T=0)}},minChars:{get:function(){return x},set:function(e){x=parseInt(e,10)||0,0>x&&(x=0)}}}),w.dispose=function(){I&&clearTimeout(I),L=null,I=null,w.sc=null,w.element=null,w.onSelect=null,f(p,"blur",B),f(p,"focus",z),f(p,"keydown",M),f(p,"keyup",$),C.splice(C.indexOf(w),1),C.length||f(window,"resize",d),document.body.removeChild(A),k?p[_]("autocomplete",k):p[y]("autocomplete")};var x=3,T=150,E=5e3,H=null,S=null,k=p[h]("autocomplete"),L={},I=null,N=3e5,R="",A=l("div","autocomplete-suggestions "+v.menuClass);A._term="",A._empty=!0,p[_]("autocomplete","off"),w.element=p,w.sc=A,w.onSelect=v.onSelect,w.source=v.source,w.cache=v.cache,w.delay=v.delay,w.minChars=v.minChars,w.key=v.key,w.value=v.value,document.body.appendChild(A),m("autocomplete-suggestion","mouseleave",function(){var e=u(".autocomplete-suggestion.selected",A);e&&setTimeout(function(){r(e,"selected")},10)},A),m("autocomplete-suggestion","mouseover",function(){var e=this;c(e,"selected")},A),m("autocomplete-suggestion","mousedown",function(e){var t=this;if(s(t,"autocomplete-suggestion")){var n=A._term,o=L[n][t._index],i=null!=S?o[S]:o,u=null!=H?o[H]:i;p.value=i,r(A,"visible"),w.onSelect(e,n,o,t,u,i)}},A);var O,j=function q(){if(null!=L){if(E>0){var e,t=A._term,n=b();for(e in L)t!=e&&null!=L[e].time&&n-L[e].time>=E&&delete L[e]}I=setTimeout(q,N)}},B=function(){var e=0;try{e=u(".autocomplete-suggestions:hover")}catch(t){e=0}e?p!==document.activeElement&&setTimeout(function(){p.focus()},10):(R=p.value,r(A,"visible"),setTimeout(function(){r(A,"visible")},350))},D=function(e){e=e||[];var t,n,u,s,c,a,f,m,d=p.value;if(L[d]=e,L[d].time=b(),d.length>=x){if(A.innerHTML="",t=i(d),e.length){for(s=new RegExp("("+o(t).split(" ").join("|")+")","gi"),n=0,u=e.length;u>n;n++)f=e[n],a=null!=S?f[S]:f,c=null!=H?f[H]:a,m=l("div","autocomplete-suggestion",v.renderItem(t,f,c,i(a),n,s)),m._index=n,A.appendChild(m);A._empty=!1}else A.appendChild(l("div","autocomplete-no-suggestions",v.noItems.split("{{term}}").join(t))),A._empty=!0;A._term=d,p===document.activeElement&&g(p,A,0)}else r(A,"visible")},M=function(t){var n,o,i=window.event?t.keyCode:t.which;if(!(40!==i&&38!==i||A._empty))return o=u(".autocomplete-suggestion.selected",A),o?(n=40===i?o.nextSibling:o.previousSibling,n?(r(o,"selected"),c(n,"selected"),p.value=null!==S?L[A._term][n._index][S]:L[A._term][n._index]):(r(o,"selected"),p.value=R,n=0)):(n=40===i?u(".autocomplete-suggestion",A):A.children[A.children.length-1],c(n,"selected"),p.value=null!=S?L[A._term][n._index][S]:L[A._term][n._index]),g(p,A,0,n),!1;if(27===i)p.value=R,r(A,"visible");else if((13===i||9===i)&&(o=u(".autocomplete-suggestion.selected",A),o&&s(A,"visible"))){var l=A._term,a=L[l][o._index],f=null!=S?a[S]:a,i=null!=H?a[H]:f;p.value=f,w.onSelect(e,l,a,o,i,f),setTimeout(function(){r(A,"visible")},10)}},$=function(e){var t,n,o=window.event?e.keyCode:e.which;if(!o||(35>o||o>40)&&13!==o&&27!==o)if(t=p.value,t.length>=x){if(t!=R){if(R=t,clearTimeout(O),E>0){if(n=b(),t in L&&E>n-L[t].time)return void D(L[t]);for(var i=1;i<t.length-x;i++){var u=t.slice(0,t.length-i);if(u in L&&E>n-L[u].time&&!L[u].length)return void D([])}}O=setTimeout(function(){w.source(t,D)},T)}}else R=t,r(A,"visible")},z=function(e){R="\n",$(e)};I=setTimeout(j,N),a(p,"blur",B),a(p,"keydown",M),a(p,"keyup",$),a(p,"focus",z),C.length||a(window,"resize",d),C.push(w)}var v="hasOwnProperty",h="getAttribute",_="setAttribute",y="removeAttribute",w=/[-\/\\^$*+?.()|[\]{}]/g,b=Date.now?Date.now:function(){return(new Date).getTime()},x=window.getComputedStyle?function(e){return getComputedStyle(e,null)}:function(e){return e.currentStyle},C=[];return p});